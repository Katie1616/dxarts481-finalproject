<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terms and Conditions</title>
    <link rel="stylesheet" href="../stylesheets/style.css">
</head>
<body>

    <div class="container">
        <video class="glitch" id="video" autoplay></video>
        <button>click me</button>
    </div>
    
    <script>
        // Video 
        navigator.mediaDevices
        .getUserMedia({
            audio: true,
            video: true,
        }).then((stream) => {
            const videoElement = document.querySelector('video');
            videoElement.srcObject = stream;
        })
        .catch((err) => {
            console.error('Error accessing media devices.', err);
        });



        let tap = 0; 
        // Edit Video 
        let videoElement = document.querySelector('video');
        let bodyElement = document.querySelector('body');
        let container = document.querySelector('.container');
        //Recursive Button
        function createButton() {
            const newButton = document.createElement('button');
            newButton.innerHTML = `<img src="..//images//image_${Math.floor(Math.random()*299)}.jpg">`;
            newButton.addEventListener('click', createButton);
            container.appendChild(newButton);
            //position new button randomly
                // Generate random positions
            let randomTop = Math.floor(Math.random() * window.innerHeight);
            let randomRight = Math.floor(Math.random() * window.innerWidth);
            newButton.style.cssText = `position: absolute; top: ${randomTop}px; right: ${randomRight}px;`;
            tap +=1; 

            //create glitch 
            if (tap%5 ===0){
                console.log(tap)
                // hold screen longer 
                setTimeout(function() {
                    videoElement.style.display = 'block';
                }, tap * 1000);

                // make size bigger 
                videoElement.style.cssText += `height: ${(tap*25 + 100)}px; width: ${(tap*25 + 200)}px;`; 
                
                // increase opacity 
                videoElement.style.cssText += `opacity: ${(tap*0.1)};`; 
                // decrease loop 
                // reverse screen and buttons 
                bodyElement.style.cssText += 'transform: scaleX(-1); z-index: -1; position:relative;';

            }
            videoElement.style.display = 'none';
            bodyElement.style.transform = '';
        }

        const initialButton = document.querySelector('button');
        initialButton.addEventListener('click', function() {
            createButton();
            initialButton.style.cssText = `display: none;`;

        })



    </script>
</body>
</html>